{% extends "layout.html.twig" %}

{% block body %}

<div class="container">
  <div class="row">

    <div class="col-md-12">
      <h1 class="text-center">{{ car['brand'] }} - {{ car['model'] }}</h1>
    <img src="/images/{{ car['photo'] }}" class="img-responsive">

      <div class="row" style="margin-top:30px;">
        <div class="col-md-8">
          <div style="border:1px solid black; padding:10px;">

            <div class="row">
              <div class="col-md-8">
                Puissance : {{ car['horse_power'] }}ch <br>
                Moteur : {{ car['engine'] }}<br>
                Carburant : {{ car['fuel'] }}<br>
                Nombre de place : {{ car['nb_place'] }}<br>
                Etat : {{ car['etat'] }}<br>
                Couleur : {{ car['color'] }}<br>
              </div>
              <div class="col-md-4">
                {{ car['address'] }}<br>
                {{ car['city'] }}<br>
                {{ car['zip_code'] }}<br>
              </div>
            </div>
          </div>

        </div>

        <div class="col-md-4">
          <div style="border:1px solid black; padding:10px;">

            <form action="/location/new">
              <input type="hidden" name="cars_id" value="{{ car['cars_id'] }}">

              <div class="form-group">
                <input type="text" class="form-control datepicker" name="date_start" placeholder="du" required>
              </div>
              <div class="form-group">
                <input type="text" class="form-control datepicker" name="date_end" placeholder="au" required>
              </div>

              {{ car['price'] }}€<br>

              <button type="submit" class="btn btn-default">Réserver</button>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-md-12">

      <h2 class="text-center">Commentaires</h2>

      <div style="border:1px solid black; padding:10px; margin-top:20px;">
        <h5>John Doe | 16/05/2017</h5>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia laboriosam facilis totam atque, beatae. Nihil sit nam tempora cumque?
          Sequi a reprehenderit, accusamus assumenda illum consectetur velit quam cumque veniam!</p>
        </div>

        <div style="border:1px solid black; padding:10px; margin-top:20px;">
          <h5>John Doe | 16/05/2017</h5>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia laboriosam facilis totam atque, beatae. Nihil sit nam tempora cumque?
            Sequi a reprehenderit, accusamus assumenda illum consectetur velit quam cumque veniam!</p>
          </div>

        </div>

      </div>

    </div>
    {% endblock %}

    {% block javascript %}

    <script>

    var disableddates =
    [
      {% for date in dates %}
      "{{ date['date'] }}",
      {% endfor %}
    ];


    $( function() {

      $( ".datepicker" ).datepicker({
        minDate: 0,
        beforeShowDay: function (date) {
          var dd = date.getDate();

          if(dd<10) {
            dd ='0'+dd
          }
          var dateFormat = date.getFullYear() + '-' + ("0" + (date.getMonth() + 1)).slice(-2) + '-' + dd;

          for (var i = 0; i < disableddates.length; i++) {
            if (disableddates[i] === dateFormat) {
              return [true,''];
            }
          }
          return [false, ''];
        }


      });






    });


    </script>
    {% endblock %}
